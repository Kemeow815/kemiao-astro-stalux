---
import type { CollectionEntry } from 'astro:content';
import type { MarkdownHeading } from 'astro';
import Head from '../components/Head.vue';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.vue';

// 正确定义Props类型
interface Props {
    title: string;
    date?: string | Date;
    updated?: string | Date;
    tags?: string[];
    categories?: any[]; // 添加categories属性
    headings?: MarkdownHeading[];
}

const { title, date, updated, tags, categories, headings = [] } = Astro.props;
import '../styles/blog.styl'
import '../styles/global.styl'
import LeftSiderbar from './LeftSiderbar.astro';
import RightSiderbar from './RightSiderbar.astro';
---

<html lang="zh-CN">
	<Head 
		title={title}
		description={title}
		author="站点作者"
	/>
	<body>
		<Header />
		<main>
			<div class="main-content">
				<LeftSiderbar />
				<article class="article-content">
					<div class="hero-image">
						<!-- 如果有特色图片可以在这里添加 -->
					</div>
					<div class="prose fade-in-up delay-200">
						<div class="title">
							<h1>{title}</h1>
							<div class="date">
								{date && (
									<div class="published-on">
										发布时间：<time>{date instanceof Date ? date.toLocaleDateString() : date}</time>
									</div>
								)}
								{updated && (
									<div class="last-updated-on">
										更新时间：<time>{updated instanceof Date ? updated.toLocaleDateString() : updated}</time>
									</div>
								)}
							</div>
							<hr />
						</div>
						<slot />
					</div>
				</article>
				<RightSiderbar {tags} {categories} {headings} />
			</div>
		</main>
		<Footer />
	</body>
	<script>
		import '../scripts/background.ts';
	</script>
	
	<!-- 添加响应式视口设置 -->
	<style is:global>
		@media (max-width: 768px) {
			html {
				font-size: 95%;
			}
		}
		
		@media (max-width: 480px) {
			html {
				font-size: 90%;
			}
		}
	</style>
</html>

