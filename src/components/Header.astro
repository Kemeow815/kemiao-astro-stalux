---
import { config_site } from '../utils/config-adapter';
// @ts-ignore
import * as feather from 'feather-icons';

// TypeScript类型定义
interface NavItem {
  title: string;
  path: string;
  icon?: string;
}

// 获取导航配置
const navItems: NavItem[] = config_site.nav;

// 从feather图标库获取图标的辅助函数
function getIconSvg(iconName: string): string {
  if (!iconName) return '';
  
  try {
    const icon = feather.icons[iconName];
    return icon ? icon.toSvg({
      width: 20,
      height: 20,
      'stroke-width': 2,
      class: 'nav-icon'
    }) : '';
  } catch (error) {
    console.error(`Icon '${iconName}' not found in feather-icons`);
    return '';
  }
}
import '../styles/components/Header.styl';
---

<nav class="nav">
  <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="导航菜单">
    <Fragment set:html={feather.icons['menu'].toSvg({
      width: 24,
      height: 24,
      class: 'menu-icon'
    })} />
  </button>

  <ul id="nav-menu">
    {navItems.map((item) => (
      <li>
        <a href={item.path} class="nav-link">
          {item.icon && (
            <span class="nav-icon-container" set:html={getIconSvg(item.icon)} />
          )}
          <span>{item.title}</span>
        </a>
      </li>
    ))}
  </ul>
</nav>

<script>
// 移动端菜单交互逻辑
document.addEventListener('DOMContentLoaded', () => {
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const navMenu = document.getElementById('nav-menu');
  
  if (menuToggle && navMenu) {
    menuToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
    });
    
    // 点击菜单项后关闭菜单
    const menuItems = navMenu.querySelectorAll('a');
    menuItems.forEach(item => {
      item.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          navMenu.classList.remove('active');
        }
      });
    });
  }
});
</script>