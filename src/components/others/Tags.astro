---
// 标签组件
const { tags = [] as string[] } = Astro.props;
import '../../styles/components/others/Tags.styl';
---

<!-- 文章标签部分 -->
<div class="sidebar-section tags">
  <div class="section-header">
    <h3>文章标签</h3>
    <button id="tags-toggle" class="section-toggle" aria-label="折叠标签">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
        <path fill="currentColor" d="M7 10l5 5 5-5z"></path>
      </svg>
    </button>
  </div>
  <div id="tags-content" class="section-content">
    <div class="tag-cloud">
      {tags && tags.length > 0 ? (
        tags.map((tag: string) => (
          <a href={`/tags/${tag}`} class="tag">{tag}</a>
        ))
      ) : (
        <div class="no-tags">暂无标签</div>
      )}
    </div>
  </div>
</div>

<script>
  // 标签折叠/展开功能
  document.addEventListener('DOMContentLoaded', () => {
    const toggleBtn = document.getElementById('tags-toggle');
    const contentEl = document.getElementById('tags-content');
    
    if (toggleBtn && contentEl) {
      toggleBtn.addEventListener('click', () => {
        const isCollapsing = !contentEl.classList.contains('collapsed');
        
        if (isCollapsing) {
          // 快速折叠 (250ms)
          contentEl.style.transition = 'max-height 0.25s ease, opacity 0.25s ease';
        } else {
          // 缓慢展开 (600ms)
          contentEl.style.transition = 'max-height 0.6s ease, opacity 0.6s ease';
        }
        
        contentEl.classList.toggle('collapsed');
        toggleBtn.classList.toggle('collapsed');
      });
    }
  });
</script>